// Empty quick response container
$('.quickResponseContainer').empty();

// Append new item to conversation
$('.conversation').append("<li class='me'><%=params[:message]%></li>");

// Add received simple responses to conversation
<% for i in 0..params[:simpleResponses].length-1 %>
  $('.conversation').append("<li class='him'><%=params[:simpleResponses][i]%></li>");
<%end%>

// Add received basic cards to conversation
<% for i in 0..params[:basicCardsTexts].length-1 %>
  $('.conversation').append("<li class='him'><%=params[:basicCardsTexts][i]%><br><a href='<%=params[:basicCardsLinkUrls][i]%>' target='_blank'><img src='<%=params[:basicCardsImgUrls][i]%>' style='width:100px; margin: 3px 0px; border: solid 1px; border-color: grey; display: block;margin-left: auto;margin-right: auto;' alt='Missing image'></a><center><a href='<%=params[:basicCardsLinkUrls][i]%>' target='_blank'><%=params[:basicCardsLinkTexts][i]%></a></center></li>");
<%end%>

// Hide quick response container if no quick response has been received and it is visible
<% if params[:suggestionResponses].length == 0 %>
      if ($('.quickResponseContainer').height()==45) {$('.quickResponseContainer').height("-=45");$('.screen').height("+=45");}
<%end%>

// Show quick response container if quick response has been received and it is not visible
<% if params[:suggestionResponses].length > 0 %>
      if ($('.quickResponseContainer').height()==0) {$('.quickResponseContainer').height("+=45");$('.screen').height("-=45");}
<%end%>

// Add quick response items to container if quick response has been received
<% for i in 0..params[:suggestionResponses].length-1 %>
    $('.quickResponseContainer').append("<button name='quickResponse' class='quickResponse' value='<%=params[:suggestionResponses][i]%>'><%=params[:suggestionResponses][i]%></button>");
<%end%>

// Empty message input field and scroll to top
$('#message_input_field').val("");
$('.screen').scrollTop(90000000);
